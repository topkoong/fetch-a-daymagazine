import{b,c as _,l as N,m as O,o as R,a as y,U as p,_ as v,p as E,q as M,v as w,e as r,w as I}from"./index.2db0b35b.js";import{Q as A,u as L,b as m,P,a as D}from"./index.e4b4184e.js";var T=function(a){b(o,a);function o(c,e){return a.call(this,c,e)||this}var i=o.prototype;return i.bindMethods=function(){a.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},i.setOptions=function(e,s){a.prototype.setOptions.call(this,_({},e,{behavior:N()}),s)},i.getOptimisticResult=function(e){return e.behavior=N(),a.prototype.getOptimisticResult.call(this,e)},i.fetchNextPage=function(e){var s;return this.fetch({cancelRefetch:(s=e==null?void 0:e.cancelRefetch)!=null?s:!0,throwOnError:e==null?void 0:e.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:e==null?void 0:e.pageParam}}})},i.fetchPreviousPage=function(e){var s;return this.fetch({cancelRefetch:(s=e==null?void 0:e.cancelRefetch)!=null?s:!0,throwOnError:e==null?void 0:e.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:e==null?void 0:e.pageParam}}})},i.createResult=function(e,s){var l,f,g,h,u,d,t=e.state,n=a.prototype.createResult.call(this,e,s);return _({},n,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:O(s,(l=t.data)==null?void 0:l.pages),hasPreviousPage:R(s,(f=t.data)==null?void 0:f.pages),isFetchingNextPage:t.isFetching&&((g=t.fetchMeta)==null||(h=g.fetchMore)==null?void 0:h.direction)==="forward",isFetchingPreviousPage:t.isFetching&&((u=t.fetchMeta)==null||(d=u.fetchMore)==null?void 0:d.direction)==="backward"})},o}(A);function F(a,o,i){var c=y(a,o,i);return L(c,T)}const k=p(()=>v(()=>import("./PageBreak.7743f6c8.js"),["assets/PageBreak.7743f6c8.js","assets/index.2db0b35b.js","assets/index.a43f5338.css"])),C=p(()=>v(()=>import("./PageHeader.80ef3faf.js"),["assets/PageHeader.80ef3faf.js","assets/index.2db0b35b.js","assets/index.a43f5338.css"])),S=p(()=>v(()=>import("./Post.0f70c3d7.js"),["assets/Post.0f70c3d7.js","assets/index.2db0b35b.js","assets/index.a43f5338.css"])),$=p(()=>v(()=>import("./index.2db0b35b.js").then(a=>a.y),["assets/index.2db0b35b.js","assets/index.a43f5338.css"]));function Q(){var d;const[a,o]=E(0),{id:i}=M(),c=w(),{category:e}=c.state,s=async({pageParam:t=`${m}?categories=${i}&per_page=${P}&offset=${a}`})=>{try{o(x=>x+P);const{data:n}=await D.get(t);return{posts:n,nextCursor:a}}catch(n){console.error(n)}},{data:l,isLoading:f,fetchNextPage:g,hasNextPage:h,isFetchingNextPage:u}=F(`posts-from-category-${i}`,({pageParam:t=`${m}?categories=${i}&per_page=${P}&offset=${a}`})=>s(t),{getNextPageParam:t=>t==null?void 0:t.nextCursor});return r("article",{className:"bg-bright-green w-full h-full py-8",children:[r(C,{title:e}),r(k,{}),f?r("div",{className:"spinner-container",children:r($,{})}):r(I,{children:[r("ul",{className:"grid grid-cols-1 gap-12 lg:gap-8 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 px-6 h-full",children:(d=l==null?void 0:l.pages)==null?void 0:d.map(t=>t==null?void 0:t.posts.map(n=>r(S,{post:n},n.id)))}),r("div",{className:"text-center mt-8 z-10",children:u?r("div",{className:"spinner-container",children:r($,{})}):h?r("button",{className:"btn-primary",onClick:()=>g({pageParam:`${m}?categories=${i}&per_page=${P}&offset=${a}`}),disabled:!h||u,children:r("span",{className:"btn-secondary",children:"Load more"})}):r("h1",{className:"btn-terinary",children:"Nothing more to load"})})]})]})}export{Q as default};
